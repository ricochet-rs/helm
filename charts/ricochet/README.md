# ricochet

![Version: 0.1.0](https://img.shields.io/badge/Version-0.1.0-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: latest](https://img.shields.io/badge/AppVersion-latest-informational?style=flat-square)

## Installation

```sh
helm install ricochet oci://ghcr.io/ricochet-rs/helm
```

Has not been tested actively, so use with caution!

## Values

| Key                                                                   | Type   | Default                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Description                                                                     |
| --------------------------------------------------------------------- | ------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| affinity                                                              | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Affinity rules for pod assignment                                               |
| clusterDomain                                                         | string | `"cluster.local"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Kubernetes cluster domain                                                       |
| config                                                                | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Ricochet TOML configuration Define arbitrary TOML sections with key-value pairs |
| env                                                                   | list   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | List of environment variables to set in the container                           |
| envFrom                                                               | list   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Set envFrom to use env vars from ConfigMaps or Secrets                          |
| existingConfigMap                                                     | string | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Use existing ConfigMap instead of generating one                                |
| extraVolumeMounts                                                     | list   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Additional volume mounts                                                        |
| extraVolumes                                                          | list   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Additional volumes                                                              |
| fullnameOverride                                                      | string | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | The full name of the release (can be overridden)                                |
| gatewayApi.&ZeroWidthSpace;annotations                                | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Annotations for the HTTPRoute resource                                          |
| gatewayApi.&ZeroWidthSpace;enabled                                    | bool   | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Enable Gateway API resources (HTTPRoute)                                        |
| gatewayApi.&ZeroWidthSpace;gateway                                    | object | `{"name":"",`<br>`"namespace":""}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Reference to the Gateway to use                                                 |
| gatewayApi.&ZeroWidthSpace;gateway.&ZeroWidthSpace;name               | string | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Name of the Gateway                                                             |
| gatewayApi.&ZeroWidthSpace;gateway.&ZeroWidthSpace;namespace          | string | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Namespace of the Gateway (defaults to release namespace)                        |
| gatewayApi.&ZeroWidthSpace;hostnames                                  | list   | `["chart-example.local"]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | List of hostnames for the HTTPRoute                                             |
| gatewayApi.&ZeroWidthSpace;labels                                     | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Additional labels for the HTTPRoute resource                                    |
| gatewayApi.&ZeroWidthSpace;rules                                      | list   | `[{"matches":[{"path":{"type":"PathPrefix",`<br>`"value":"/"}}]}]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | HTTP routing rules                                                              |
| image.&ZeroWidthSpace;pullPolicy                                      | string | `"IfNotPresent"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Image pull policy                                                               |
| image.&ZeroWidthSpace;registry                                        | string | `"reg.ricochet.rs"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Docker registry for the image                                                   |
| image.&ZeroWidthSpace;repository                                      | string | `"ricochet/ricochet-server"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Repository for the image                                                        |
| image.&ZeroWidthSpace;tag                                             | string | `"dev-alpine"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Tag for the image (defaults to chart appVersion)                                |
| imagePullSecrets                                                      | list   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | List of image pull secrets                                                      |
| ingress.&ZeroWidthSpace;annotations                                   | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Annotations for ingress resource                                                |
| ingress.&ZeroWidthSpace;className                                     | string | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Ingress class name                                                              |
| ingress.&ZeroWidthSpace;enabled                                       | bool   | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Enable ingress resource                                                         |
| ingress.&ZeroWidthSpace;hosts                                         | list   | `[{"host":"chart-example.local",`<br>`"paths":[{"path":"/",`<br>`"pathType":"Prefix"}]}]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | List of hosts for the ingress resource                                          |
| ingress.&ZeroWidthSpace;tls                                           | list   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | TLS configuration for the ingress                                               |
| initContainers                                                        | list   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Additional init containers                                                      |
| livenessProbe                                                         | object | `{"failureThreshold":3,`<br>`"httpGet":{"path":"/health",`<br>`"port":"http"},`<br>`"initialDelaySeconds":30,`<br>`"periodSeconds":10,`<br>`"successThreshold":1,`<br>`"timeoutSeconds":5}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Liveness probe configuration                                                    |
| nameOverride                                                          | string | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | The name of the release (can be overridden)                                     |
| networkPolicy                                                         | object | `{"egress":[{"ports":[{"port":53,`<br>`"protocol":"TCP"},`<br>`{"port":53,`<br>`"protocol":"UDP"}],`<br>`"to":[{"podSelector":{"matchLabels":{}}}]},`<br>`{"ports":[{"port":443,`<br>`"protocol":"TCP"},`<br>`{"port":80,`<br>`"protocol":"TCP"}],`<br>`"to":[{"podSelector":{"matchLabels":{}}},`<br>`{"namespaceSelector":{}}]}],`<br>`"enabled":false,`<br>`"ingress":[{"from":[{"podSelector":{"matchLabels":{}}},`<br>`{"namespaceSelector":{"matchLabels":{"name":"ingress-nginx"}}},`<br>`{"namespaceSelector":{"matchLabels":{"kubernetes.io/metadata.name":"ingress-nginx"}}},`<br>`{"namespaceSelector":{"matchLabels":{"name":"gateway-system"}}},`<br>`{"namespaceSelector":{"matchLabels":{"kubernetes.io/metadata.name":"gateway-system"}}},`<br>`{"namespaceSelector":{"matchLabels":{"app.kubernetes.io/name":"ingress-nginx"}}}],`<br>`"ports":[{"port":6188,`<br>`"protocol":"TCP"}]}]}` | Network policy configuration                                                    |
| networkPolicy.&ZeroWidthSpace;egress                                  | list   | `[{"ports":[{"port":53,`<br>`"protocol":"TCP"},`<br>`{"port":53,`<br>`"protocol":"UDP"}],`<br>`"to":[{"podSelector":{"matchLabels":{}}}]},`<br>`{"ports":[{"port":443,`<br>`"protocol":"TCP"},`<br>`{"port":80,`<br>`"protocol":"TCP"}],`<br>`"to":[{"podSelector":{"matchLabels":{}}},`<br>`{"namespaceSelector":{}}]}]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Egress rules                                                                    |
| networkPolicy.&ZeroWidthSpace;enabled                                 | bool   | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Enable NetworkPolicy                                                            |
| networkPolicy.&ZeroWidthSpace;ingress                                 | list   | `[{"from":[{"podSelector":{"matchLabels":{}}},`<br>`{"namespaceSelector":{"matchLabels":{"name":"ingress-nginx"}}},`<br>`{"namespaceSelector":{"matchLabels":{"kubernetes.io/metadata.name":"ingress-nginx"}}},`<br>`{"namespaceSelector":{"matchLabels":{"name":"gateway-system"}}},`<br>`{"namespaceSelector":{"matchLabels":{"kubernetes.io/metadata.name":"gateway-system"}}},`<br>`{"namespaceSelector":{"matchLabels":{"app.kubernetes.io/name":"ingress-nginx"}}}],`<br>`"ports":[{"port":6188,`<br>`"protocol":"TCP"}]}]`                                                                                                                                                                                                                                                                                                                                                                          | Ingress rules                                                                   |
| nodeSelector                                                          | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Node selector for pod assignment                                                |
| persistence                                                           | object | `{"cache":{"accessMode":"ReadWriteOnce",`<br>`"annotations":{},`<br>`"enabled":false,`<br>`"existingClaim":"",`<br>`"mountPath":"/opt/ricochet/renv/cache",`<br>`"size":"10Gi",`<br>`"storageClass":""},`<br>`"home":{"accessMode":"ReadWriteOnce",`<br>`"annotations":{},`<br>`"enabled":false,`<br>`"existingClaim":"",`<br>`"mountPath":"/opt/ricochet/data",`<br>`"size":"25Gi",`<br>`"storageClass":""}}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Persistence configuration for multiple volumes                                  |
| persistence.&ZeroWidthSpace;cache.&ZeroWidthSpace;accessMode          | string | `"ReadWriteOnce"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Access mode for the cache PVC                                                   |
| persistence.&ZeroWidthSpace;cache.&ZeroWidthSpace;annotations         | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Annotations for the cache PVC                                                   |
| persistence.&ZeroWidthSpace;cache.&ZeroWidthSpace;enabled             | bool   | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Enable persistent volume for cache                                              |
| persistence.&ZeroWidthSpace;cache.&ZeroWidthSpace;existingClaim       | string | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Use an existing PVC for cache                                                   |
| persistence.&ZeroWidthSpace;cache.&ZeroWidthSpace;mountPath           | string | `"/opt/ricochet/renv/cache"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Mount path for the cache volume                                                 |
| persistence.&ZeroWidthSpace;cache.&ZeroWidthSpace;size                | string | `"10Gi"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Size of the cache PVC                                                           |
| persistence.&ZeroWidthSpace;cache.&ZeroWidthSpace;storageClass        | string | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Storage class for the cache PVC (use '-' for default)                           |
| persistence.&ZeroWidthSpace;home.&ZeroWidthSpace;accessMode           | string | `"ReadWriteOnce"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Access mode for the home PVC                                                    |
| persistence.&ZeroWidthSpace;home.&ZeroWidthSpace;annotations          | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Annotations for the home PVC                                                    |
| persistence.&ZeroWidthSpace;home.&ZeroWidthSpace;enabled              | bool   | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Enable persistent volume for home                                               |
| persistence.&ZeroWidthSpace;home.&ZeroWidthSpace;existingClaim        | string | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Use an existing PVC for home                                                    |
| persistence.&ZeroWidthSpace;home.&ZeroWidthSpace;mountPath            | string | `"/opt/ricochet/data"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Mount path for the home volume                                                  |
| persistence.&ZeroWidthSpace;home.&ZeroWidthSpace;size                 | string | `"25Gi"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Size of the home PVC                                                            |
| persistence.&ZeroWidthSpace;home.&ZeroWidthSpace;storageClass         | string | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Storage class for the home PVC (use '-' for default)                            |
| podAnnotations                                                        | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Annotations for pods                                                            |
| podLabels                                                             | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Additional labels for pods                                                      |
| podSecurityContext                                                    | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Security context for pods                                                       |
| rbac                                                                  | object | `{"create":false,`<br>`"rules":[]}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | RBAC configuration                                                              |
| rbac.&ZeroWidthSpace;create                                           | bool   | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Create RBAC resources                                                           |
| rbac.&ZeroWidthSpace;rules                                            | list   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Custom RBAC rules                                                               |
| readinessProbe                                                        | object | `{"failureThreshold":3,`<br>`"httpGet":{"path":"/ready",`<br>`"port":"http"},`<br>`"initialDelaySeconds":5,`<br>`"periodSeconds":5,`<br>`"successThreshold":1,`<br>`"timeoutSeconds":3}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Readiness probe configuration                                                   |
| replicaCount                                                          | int    | `1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Number of replicas to deploy                                                    |
| resources.&ZeroWidthSpace;limits                                      | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Resource limits for the container                                               |
| resources.&ZeroWidthSpace;requests                                    | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Resource requests for the container                                             |
| securityContext                                                       | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Security context for containers                                                 |
| service.&ZeroWidthSpace;annotations                                   | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Annotations for the service                                                     |
| service.&ZeroWidthSpace;labels                                        | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Additional labels for the service                                               |
| service.&ZeroWidthSpace;port                                          | int    | `6188`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Service port                                                                    |
| service.&ZeroWidthSpace;protocol                                      | string | `"TCP"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Protocol for the service                                                        |
| service.&ZeroWidthSpace;targetPort                                    | int    | `6188`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Container port                                                                  |
| service.&ZeroWidthSpace;type                                          | string | `"ClusterIP"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Service type                                                                    |
| serviceAccount                                                        | object | `{"annotations":{},`<br>`"create":true,`<br>`"name":""}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Service account configuration                                                   |
| serviceAccount.&ZeroWidthSpace;annotations                            | object | `{}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Annotations for the service account                                             |
| serviceAccount.&ZeroWidthSpace;create                                 | bool   | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Create a service account                                                        |
| serviceAccount.&ZeroWidthSpace;name                                   | string | `""`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Name of the service account (generated if not set)                              |
| sidecarContainers                                                     | list   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Sidecar containers                                                              |
| strategy                                                              | object | `{"rollingUpdate":{"maxSurge":1,`<br>`"maxUnavailable":0},`<br>`"type":"RollingUpdate"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Deployment strategy configuration                                               |
| strategy.&ZeroWidthSpace;rollingUpdate.&ZeroWidthSpace;maxSurge       | int    | `1`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Maximum number of pods that can be created over the desired number of pods      |
| strategy.&ZeroWidthSpace;rollingUpdate.&ZeroWidthSpace;maxUnavailable | int    | `0`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Maximum number of pods that can be unavailable during the update process        |
| strategy.&ZeroWidthSpace;type                                         | string | `"RollingUpdate"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Deployment strategy type (RollingUpdate or Recreate)                            |
| tolerations                                                           | list   | `[]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Tolerations for pod assignment                                                  |
